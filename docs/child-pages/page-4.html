<p>This page provides a reference guide for all the custom Handlebars helper functions available in <code>publish-confluence</code>. These helpers allow you to easily generate Confluence macros within your page templates (<code>confluence-template.html</code>).</p>
<h2>HTML Macro</h2>
<p>Generates the Confluence HTML macro, typically used to embed your JavaScript application. This is often used within the <code>macro-template.html</code> or directly in the page template if a separate macro template isn't used.</p>
<p><strong>Syntax:</strong></p>
{{#confluence-code language="handlebars" title="HTML Macro Syntax"}}
\{{#confluence-html}}
  <!-- HTML content for the macro -->
  <div id="app">Loading...</div>
  \{{{styles}}}  <!-- Placeholder for CSS links -->
  \{{{scripts}}} <!-- Placeholder for JS scripts -->
\{{/confluence-html}}
{{/confluence-code}}
<p><strong>Parameters:</strong> None</p>
<p><strong>Example Usage (in macro-template.html):</strong></p>
{{#confluence-code language="handlebars" title="HTML Macro Example"}}
<div class="my-app-wrapper">
  <div id="app">
    <!-- Application will mount here -->
  </div>
  \{{{styles}}}
  \{{{scripts}}}
</div>
{{/confluence-code}}
<p><em>Note: The content inside <code>confluence-html</code> is the direct body of the HTML macro. Remember to include <code>\{{{styles}}}</code> and <code>\{{{scripts}}}</code> if you are using a <code>macroTemplatePath</code>.</em></p>

<hr />

<h2>Panel Macro</h2>
<p>Creates a standard Confluence panel to highlight information.</p>
<p><strong>Syntax:</strong></p>
{{#confluence-code language="handlebars" title="Panel Macro Syntax"}}
\{{#confluence-panel title="Optional Panel Title" type="panel-type"}}
  <p>Panel content goes here (must be valid XHTML).</p>
  <ul>
    <li>Like lists</li>
  </ul>
\{{/confluence-panel}}
{{/confluence-code}}
<p><strong>Parameters:</strong></p>
<ul>
    <li><code>title</code> (String, Optional): The title displayed in the panel header.</li>
    <li><code>type</code> (String, Required): The style of the panel. Valid types: <code>note</code>, <code>info</code>, <code>warning</code>, <code>success</code>, <code>error</code>.</li>
</ul>
<p><strong>Example Usage:</strong></p>
{{#confluence-code language="handlebars" title="Panel Macro Example"}}
\{{#confluence-panel title="Important Update" type="info"}}
  <p>Please review the latest project guidelines.</p>
\{{/confluence-panel}}

\{{#confluence-panel type="warning"}}
  <p><strong>Caution:</strong> This feature is deprecated.</p>
\{{/confluence-panel}}
{{/confluence-code}}

<hr />

<h2>Layout Macros</h2>
<p>Used together to create multi-column layouts on the Confluence page.</p>

<h3>Layout Container</h3>
<p>The main wrapper for all layout sections.</p>
<p><strong>Syntax:</strong></p>
{{#confluence-code language="handlebars" title="Layout Container Syntax"}}
\{{#confluence-layout}}
  <!-- layout-section helpers go here -->
\{{/confluence-layout}}
{{/confluence-code}}
<p><strong>Parameters:</strong> None</p>

<h3>Layout Section</h3>
<p>Defines a row within the layout container, specifying the column structure.</p>
<p><strong>Syntax:</strong></p>
{{#confluence-code language="handlebars" title="Layout Section Syntax"}}
\{{#layout-section type="section-type"}}
  <!-- layout-cell helpers go here -->
\{{/layout-section}}
{{/confluence-code}}
<p><strong>Parameters:</strong></p>
<ul>
    <li><code>type</code> (String, Required): The column layout type. Valid types: <code>single</code>, <code>two_equal</code>, <code>two_left_sidebar</code>, <code>two_right_sidebar</code>, <code>three_equal</code>, <code>three_with_sidebars</code>.</li>
</ul>

<h3>Layout Cell</h3>
<p>Defines a single column (cell) within a layout section. The number of cells must match the parent section's type.</p>
<p><strong>Syntax:</strong></p>
{{#confluence-code language="handlebars" title="Layout Cell Syntax"}}
\{{#layout-cell}}
  <p>Content for this column (must be valid XHTML block content).</p>
  <p>Can include text, images, or other macros.</p>
\{{/layout-cell}}
{{/confluence-code}}
<p><strong>Parameters:</strong> None</p>

<p><strong>Example Usage (Two Equal Columns):</strong></p>
{{#confluence-code language="handlebars" title="Layout Example"}}
\{{#confluence-layout}}
  \{{#layout-section type="two_equal"}}
    \{{#layout-cell}}
      <h3>Column 1</h3>
      <p>Content for the left column.</p>
    \{{/layout-cell}}
    \{{#layout-cell}}
      <h3>Column 2</h3>
      <p>Content for the right column.</p>
      \{{#confluence-panel type="note"}}
         <p>Macros can be nested inside cells.</p>
      \{{/confluence-panel}}
    \{{/layout-cell}}
  \{{/layout-section}}
\{{/confluence-layout}}
{{/confluence-code}}

<hr />

<h2>Code Block Macro</h2>
<p>Displays code snippets with syntax highlighting.</p>
<p><strong>Syntax:</strong></p>
{{#confluence-code language="handlebars" title="Code Block Syntax"}}
\{{#confluence-code language="lang" title="Optional Title" linenumbers=true|false theme="Optional Theme"}}
// Your code snippet here
function example() {
  return true;
}
\{{/confluence-code}}
{{/confluence-code}}
<p><strong>Parameters:</strong></p>
<ul>
    <li><code>language</code> (String, Optional): The language for syntax highlighting (e.g., <code>javascript</code>, <code>java</code>, <code>python</code>, <code>xml</code>, <code>sql</code>, <code>none</code>). Defaults to <code>none</code>.</li>
    <li><code>title</code> (String, Optional): A title displayed above the code block.</li>
    <li><code>linenumbers</code> (Boolean, Optional): Set to <code>true</code> to show line numbers. Defaults to <code>false</code>.</li>
    <li><code>theme</code> (String, Optional): The Confluence code block theme (e.g., <code>Confluence</code>, <code>DJango</code>, <code>Eclipse</code>, etc.). Defaults to Confluence default.</li>
</ul>
<p><strong>Example Usage:</strong></p>
{{#confluence-code language="handlebars" title="Code Block Example"}}
\{{#confluence-code language="javascript" title="Example Function" linenumbers=true}}
function greet(name) {
  console.log(`Hello, ${name}!`);
}
greet('World');
\{{/confluence-code}}
{{/confluence-code}}
<p><em>Note: The content inside the <code>confluence-code</code> block is automatically wrapped in CDATA.</em></p>

<hr />

<h2>Table of Contents Macro</h2>
<p>Generates a table of contents based on the headings (h1-h6) on the page.</p>
<p><strong>Syntax:</strong></p>
{{#confluence-code language="handlebars" title="TOC Syntax"}}
\{{confluence-toc minLevel=1 maxLevel=6 type="list|flat" outline="true|false" style="disc|circle|square|decimal|lower-alpha|lower-roman|upper-alpha|upper-roman"}}
{{/confluence-code}}
<p><strong>Parameters:</strong></p>
<ul>
    <li><code>minLevel</code> (Number, Optional): The minimum heading level to include (1-6). Defaults to 1.</li>
    <li><code>maxLevel</code> (Number, Optional): The maximum heading level to include (1-6). Defaults to 6.</li>
    <li><code>type</code> (String, Optional): <code>list</code> (default) or <code>flat</code>.</li>
    <li><code>outline</code> (Boolean, Optional): Indent items based on heading level. Defaults to <code>true</code>.</li>
    <li><code>style</code> (String, Optional): List style type (CSS list-style-type values). Defaults to Confluence default.</li>
</ul>
<p><strong>Example Usage:</strong></p>
{{#confluence-code language="handlebars" title="TOC Example"}}
\{{confluence-toc minLevel=2 maxLevel=4 style="decimal"}}
{{/confluence-code}}

<hr />

<h2>Status Macro</h2>
<p>Displays a colored status lozenge.</p>
<p><strong>Syntax:</strong></p>
{{#confluence-code language="handlebars" title="Status Syntax"}}
\{{confluence-status type="color" text="Status Text" subtle="true|false"}}
{{/confluence-code}}
<p><strong>Parameters:</strong></p>
<ul>
    <li><code>type</code> (String, Required): The color of the lozenge. Valid types: <code>grey</code> (default), <code>red</code>, <code>yellow</code>, <code>green</code>, <code>blue</code>, <code>purple</code>.</li>
    <li><code>text</code> (String, Required): The text displayed inside the lozenge.</li>
    <li><code>subtle</code> (Boolean, Optional): Use a subtle style. Defaults to <code>false</code>.</li>
</ul>
<p><strong>Example Usage:</strong></p>
{{#confluence-code language="handlebars" title="Status Example"}}
Task Status: \{{confluence-status type="green" text="Completed"}}
Project Health: \{{confluence-status type="yellow" text="At Risk" subtle=true}}
{{/confluence-code}}

<hr />

<h2>Admonition Macros</h2>
<p>Creates styled blocks for specific types of information (Info, Note, Warning, Tip). These are essentially pre-configured Panel macros.</p>
<p><strong>Syntax:</strong></p>
{{#confluence-code language="handlebars" title="Admonition Syntax"}}
\{{#confluence-info title="Optional Title"}}<p>Information content.</p>\{{/confluence-info}}
\{{#confluence-note title="Optional Title"}}<p>Note content.</p>\{{/confluence-note}}
\{{#confluence-warning title="Optional Title"}}<p>Warning content.</p>\{{/confluence-warning}}
\{{#confluence-tip title="Optional Title"}}<p>Tip content.</p>\{{/confluence-tip}}
{{/confluence-code}}
<p><strong>Parameters:</strong></p>
<ul>
    <li><code>title</code> (String, Optional): The title displayed in the admonition header.</li>
</ul>
<p><strong>Example Usage:</strong></p>
{{#confluence-code language="handlebars" title="Admonition Example"}}
\{{#confluence-warning title="Security Alert"}}
  <p>Do not share your API token publicly.</p>
\{{/confluence-warning}}

\{{#confluence-tip}}
  <p>Use the <code>--debug</code> flag for detailed logs.</p>
\{{/confluence-tip}}
{{/confluence-code}}

<hr />

<h2>Expand Macro</h2>
<p>Creates a collapsible section of content.</p>
<p><strong>Syntax:</strong></p>
{{#confluence-code language="handlebars" title="Expand Syntax"}}
\{{#confluence-expand title="Title for the Expand Section"}}
  <p>This content is initially hidden.</p>
  <p>It can contain any valid XHTML.</p>
\{{/confluence-expand}}
{{/confluence-code}}
<p><strong>Parameters:</strong></p>
<ul>
    <li><code>title</code> (String, Required): The text displayed for the expand trigger.</li>
</ul>
<p><strong>Example Usage:</strong></p>
{{#confluence-code language="handlebars" title="Expand Example"}}
\{{#confluence-expand title="Click to view Advanced Settings"}}
  <p>Setting 1: Enable feature X.</p>
  <p>Setting 2: Configure parameter Y.</p>
\{{/confluence-expand}}
{{/confluence-code}}

<hr />

<h2>Children Display Macro</h2>
<p>Displays a list of child pages under the current page.</p>
<p><strong>Syntax:</strong></p>
{{#confluence-code language="handlebars" title="Children Display Syntax"}}
\{{confluence-children}}
{{/confluence-code}}
<p><strong>Parameters:</strong> None (at the moment, uses Confluence defaults)</p>
<p><strong>Example Usage:</strong></p>
{{#confluence-code language="handlebars" title="Children Display Example"}}
<h3>Sub-topics:</h3>
\{{confluence-children}}
{{/confluence-code}}

<hr />

<h2>Other Helpers</h2>

<h3>Divider</h3>
<p>Inserts a horizontal rule.</p>
<p><strong>Syntax:</strong> <code>\{{confluence-divider}}</code></p>

<h3>Date</h3>
<p>Displays a formatted date using the Confluence Date macro.</p>
<p><strong>Syntax:</strong> <code>\{{confluence-date date="YYYY-MM-DD" format="Optional Format"}}</code></p>
<p><strong>Parameters:</strong></p>
<ul>
    <li><code>date</code> (String, Required): The date in YYYY-MM-DD format.</li>
    <li><code>format</code> (String, Optional): A date format string (e.g., <code>MMM dd, yyyy</code>). Defaults to Confluence default.</li>
</ul>
<p><strong>Example:</strong> <code>\{{confluence-date date="2024-03-15" format="dd MMM yyyy"}}</code></p>

<h3>Anchor</h3>
<p>Creates a named anchor point on the page.</p>
<p><strong>Syntax:</strong> <code>\{{confluence-anchor name="anchor-name"}}</code></p>
<p><strong>Parameters:</strong></p>
<ul>
    <li><code>name</code> (String, Required): The unique name for the anchor.</li>
</ul>
<p><strong>Example:</strong> <code>\{{confluence-anchor name="installation-section"}}</code></p>

<h3>User Mention</h3>
<p>Mentions a Confluence user, creating a link to their profile.</p>
<p><strong>Syntax:</strong> <code>\{{confluence-user key="user-key"}}</code></p>
<p><strong>Parameters:</strong></p>
<ul>
    <li><code>key</code> (String, Required): The Confluence user key (often the username or a unique ID).</li>
</ul>
<p><strong>Example:</strong> <code>Contact \{{confluence-user key="jsmith"}} for details.</code></p>

<h3>Raw</h3>
<p>Outputs the content within the block without any Handlebars processing or HTML escaping. Use with extreme caution.</p>
<p><strong>Syntax:</strong></p>
{{#confluence-code language="handlebars" title="Raw Syntax"}}
\{{#raw}}
  <!-- Content here is output exactly as is -->
  <custom-tag data-attr="\{{not a variable}}">
    This will appear literally.
  </custom-tag>
\{{/raw}}
{{/confluence-code}}

<hr />
<p><em>End of Macro Helper Reference. Last updated: {{currentDate}}</em></p>